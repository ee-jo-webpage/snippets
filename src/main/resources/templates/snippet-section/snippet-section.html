<!-- Ïä§ÎãàÌé´ ÏÑπÏÖò fragment -->
<div th:fragment="snippetSection" class="snippets-section">
    <div class="section-header">
        <h2 id="snippetsTitle" th:text="'üìù ' + (${selectedTagName} != null ? '&quot;' + ${selectedTagName} + '&quot; ÌÉúÍ∑∏Ïùò Ïä§ÎãàÌé´ Î™©Î°ù' : 'Ïä§ÎãàÌé´ Î™©Î°ù')">üìù Ïä§ÎãàÌé´ Î™©Î°ù</h2>
        <button id="closeSnippetsBtn" class="btn btn-secondary">
            <i class="fas fa-times"></i> Îã´Í∏∞
        </button>
    </div>
    <div id="snippetsGrid" class="snippets-grid">
        <!-- Ïä§ÎãàÌé´ Ïπ¥ÎìúÎì§Ïù¥ JavaScriptÎ°ú ÎèôÏ†Å ÏÉùÏÑ±Îê® -->
    </div>
</div>

<!-- Î™®Îã¨ fragment -->
<div th:fragment="snippetModal" id="snippetDetailModal" class="modal" style="display: none;">
    <div class="modal-content snippet-modal-content">
        <div class="modal-header">
            <h3>Ïä§ÎãàÌé´ ÏÉÅÏÑ∏Î≥¥Í∏∞</h3>
            <span class="modal-close">&times;</span>
        </div>
        <div class="modal-body snippet-modal-body">
            <!-- ÏÉÅÎã®: Î©îÌÉÄ Ï†ïÎ≥¥ÏôÄ ÏΩòÌÖêÏ∏†Î•º Í∞ÄÎ°úÎ°ú Î∞∞Ïπò -->
            <div class="snippet-main-content">
                <div class="snippet-left-panel">
                    <div class="snippet-detail-meta">
                        <!-- Í∏∞Ï°¥ Î©îÌÉÄ Ï†ïÎ≥¥ -->
                    </div>
                </div>
                <div class="snippet-right-panel">
                    <div class="snippet-detail-content">
                        <!-- Í∏∞Ï°¥ ÏΩòÌÖêÏ∏† -->
                    </div>
                </div>
            </div>

            <!-- ÌïòÎã®: ÌÉúÍ∑∏ ÏÑπÏÖò -->
            <div class="snippet-tags-section">
                <h4>üè∑Ô∏è ÌÉúÍ∑∏</h4>
                <div class="snippet-tags-display" id="snippetTagsDisplay">
                    <!-- ÌÉúÍ∑∏ Î∞∞ÏßÄÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê® -->
                </div>
                <div class="snippet-tags-input">
                    <input type="text" id="tagInput" placeholder="ÌÉúÍ∑∏ Ï∂îÍ∞Ä (ÏâºÌëúÎ°ú Íµ¨Î∂Ñ)" class="tag-input">
                    <button id="addTagsBtn" class="btn btn-primary">ÌÉúÍ∑∏ Ï∂îÍ∞Ä</button>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="modal-footer-left">
                <button id="bookmarkToggleBtn" class="btn btn-bookmark">
                    <i class="fas fa-bookmark"></i> <span class="bookmark-text">Î∂ÅÎßàÌÅ¨</span>
                </button>
                <button id="editSnippetBtn" class="btn btn-warning">
                    <i class="fas fa-edit"></i> ÏàòÏ†ï
                </button>
                <button id="deleteSnippetBtn" class="btn btn-danger">
                    <i class="fas fa-trash"></i> ÏÇ≠Ï†ú
                </button>
            </div>
            <div class="modal-footer-right">
                <button class="btn btn-secondary">
                    <i class="fas fa-times"></i> Îã´Í∏∞
                </button>
            </div>
        </div>
    </div>
</div>


<!--snippet ListÏóê ÎÑ£ÏùÑ Í±∞ ÌÖåÏä§Ìä∏Ï§ë-->

<div th:fragment="snippetList">
    <!-- Ïä§ÎãàÌé´Ïù¥ ÏóÜÎäî Í≤ΩÏö∞ -->
    <div th:if="${#lists.isEmpty(snippets)}" class="empty-state">
        <div class="emoji">üìù</div>
        <p>Ïä§ÎãàÌé´Ïù¥ ÏóÜÏäµÎãàÎã§.</p>
        <p>ÏÉàÎ°úÏö¥ Ïä§ÎãàÌé´ÏùÑ Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî!</p>
    </div>
    
    <!-- Ïä§ÎãàÌé´ Í∑∏Î¶¨Îìú -->
    <div th:unless="${#lists.isEmpty(snippets)}" class="snippets-grid">
        <div th:each="snippet : ${snippets}" 
             class="snippet-card bookmark-card" 
             th:data-snippet-id="${snippet.snippetId}" 
             th:data-id="${snippet.snippetId}"
             role="button"
             tabindex="0"
             aria-label="Ïä§ÎãàÌé´ ÏÉÅÏÑ∏Î≥¥Í∏∞">
            
            <!-- ÏÉâÏÉÅ Ïù∏ÎîîÏºÄÏù¥ÌÑ∞ -->
            <div th:if="${snippet.hexCode != null and !#strings.isEmpty(snippet.hexCode)}" 
                 class="color-indicator" 
                 th:style="'background-color: ' + ${snippet.hexCode}"
                 th:title="${snippet.colorName != null ? snippet.colorName : 'Color'}">
                <span class="color-name" 
                      th:text="${snippet.colorName != null ? snippet.colorName : 'Color'}">Color</span>
            </div>
            
            <!-- Ïπ¥Îìú Ìó§Îçî -->
            <div class="snippet-card-header">
                <!-- Î©îÌÉÄ Ï†ïÎ≥¥ -->
                <div class="snippet-meta">
                    <span th:if="${snippet.type != null}" 
                          th:class="'meta-item type-badge ' + (snippet.type == 'CODE' ? 'type-code' : (snippet.type == 'TEXT' ? 'type-text' : 'type-img'))"
                          th:text="${snippet.type}">CODE</span>
                    <span th:if="${snippet.language != null and !#strings.isEmpty(snippet.language)}" 
                          class="meta-item language-badge" 
                          th:text="${snippet.language}">JavaScript</span>
                </div>
                
                <!-- Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
                
            </div>
            
            <!-- Ïπ¥Îìú Î∞îÎîî -->
            <div class="snippet-card-body">
                <!-- Ï†úÎ™© -->
                <h3 class="snippet-title bookmark-title" 
                    th:text="${snippet.memo != null and !#strings.isEmpty(snippet.memo) ? snippet.memo : 'Ï†úÎ™© ÏóÜÏùå'}">
                    Ïä§ÎãàÌé´ Ï†úÎ™©
                </h3>
                
                <!-- ÏΩòÌÖêÏ∏† ÎØ∏Î¶¨Î≥¥Í∏∞ -->
                <div class="snippet-content-preview">
                    <pre th:if="${snippet.type == 'CODE'}" 
                         class="code-preview"><code th:text="${snippet.content != null and #strings.length(snippet.content) > 150 ? 
                                                              #strings.substring(snippet.content, 0, 150) + '...' : 
                                                              (snippet.content != null ? snippet.content : 'ÎÇ¥Ïö© ÏóÜÏùå')}">ÏΩîÎìú ÎØ∏Î¶¨Î≥¥Í∏∞</code></pre>
                    <p th:unless="${snippet.type == 'CODE'}" 
                       class="text-preview"
                       th:text="${snippet.content != null and #strings.length(snippet.content) > 150 ? 
                                 #strings.substring(snippet.content, 0, 150) + '...' : 
                                 (snippet.content != null ? snippet.content : 'ÎÇ¥Ïö© ÏóÜÏùå')}">
                        ÌÖçÏä§Ìä∏ ÎØ∏Î¶¨Î≥¥Í∏∞
                    </p>
                </div>
                
                
                
                <!-- ÏÉùÏÑ±Ïùº -->
                <div class="snippet-footer">
                    <span class="snippet-date" 
                          th:text="${#dates.format(snippet.createdAt, 'yyyy-MM-dd HH:mm')}">
                        2024-01-01 12:00
                    </span>
                    <span class="more-indicator">
                        <i class="fas fa-chevron-right"></i>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ïä§ÎãàÌé´ ÏÉÅÏÑ∏Î≥¥Í∏∞ Î™®Îã¨ -->
<div th:fragment="A" id="snippetDetailModal" class="modal" style="display: none;">
    <div class="modal-content snippet-modal-content">
        <div class="modal-header">
            <h3 id="snippetModalTitle">Ïä§ÎãàÌé´ ÏÉÅÏÑ∏Î≥¥Í∏∞</h3>
            <span class="modal-close" aria-label="Î™®Îã¨ Îã´Í∏∞">&times;</span>
        </div>
        <div class="modal-body snippet-modal-body" id="snippetModalBody">
            <!-- Î°úÎî© ÏÉÅÌÉú -->
            <div class="snippet-loading" id="snippetLoading">
                <div class="spinner"></div>
                <p>Ïä§ÎãàÌé´ Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
            </div>
            
            <!-- ÏÉÅÏÑ∏ ÎÇ¥Ïö© (ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê®) -->
            <div class="snippet-detail-container" id="snippetDetailContainer" style="display: none;">
                <!-- ÏÉÅÎã®: Î©îÌÉÄ Ï†ïÎ≥¥ÏôÄ ÏΩòÌÖêÏ∏†Î•º Í∞ÄÎ°úÎ°ú Î∞∞Ïπò -->
                <div class="snippet-main-content">
                    <div class="snippet-left-panel">
                        <div class="snippet-detail-meta">
                            <div class="meta-item">
                                <span class="meta-label">ID:</span>
                                <span class="meta-value" id="snippetId"></span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">ÌÉÄÏûÖ:</span>
                                <span class="meta-value snippet-type" id="snippetType"></span>
                            </div>
                            <div class="meta-item" id="languageItem" style="display: none;">
                                <span class="meta-label">Ïñ∏Ïñ¥:</span>
                                <span class="meta-value snippet-language" id="snippetLanguage"></span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">ÏÉùÏÑ±Ïùº:</span>
                                <span class="meta-value snippet-date" id="snippetDate"></span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">ÏàòÏ†ïÏùº:</span>
                                <span class="meta-value snippet-updated" id="snippetUpdated"></span>
                            </div>
                            <div class="meta-item" id="colorItem" style="display: none;">
                                <span class="meta-label">ÏÉâÏÉÅ:</span>
                                <div class="color-preview" id="snippetColorPreview">
                                    <span class="color-name" id="snippetColorName"></span>
                                </div>
                            </div>
                            <div class="meta-item" id="sourceUrlItem" style="display: none;">
                                <span class="meta-label">Ï∂úÏ≤ò:</span>
                                <a class="meta-value source-link" id="snippetSourceUrl" target="_blank"></a>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Ï¢ãÏïÑÏöî:</span>
                                <span class="meta-value" id="snippetLikeCount"></span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Í≥µÍ∞úÏÑ§Ï†ï:</span>
                                <span class="meta-value" id="snippetVisibility"></span>
                            </div>
                        </div>
                    </div>
                    <div class="snippet-right-panel">
                        <div class="snippet-detail-content">
                            <div class="snippet-title-section">
                                <h4 id="snippetTitle" class="detail-title"></h4>
                            </div>
                            
                            <!-- ÏΩîÎìú ÌÉÄÏûÖ ÏΩòÌÖêÏ∏† -->
                            <div class="snippet-content-wrapper" id="codeContentWrapper" style="display: none;">
                                <button class="copy-btn" id="copyContentBtn" title="ÏΩîÎìú Î≥µÏÇ¨">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <pre><code id="snippetCodeContent" class="snippet-code"></code></pre>
                            </div>
                            
                            <!-- ÌÖçÏä§Ìä∏ ÌÉÄÏûÖ ÏΩòÌÖêÏ∏† -->
                            <div class="snippet-text-wrapper" id="textContentWrapper" style="display: none;">
                                <button class="copy-btn" id="copyTextBtn" title="ÌÖçÏä§Ìä∏ Î≥µÏÇ¨">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <div class="snippet-text-content" id="snippetTextContent"></div>
                            </div>
                            
                            <!-- Ïù¥ÎØ∏ÏßÄ ÌÉÄÏûÖ ÏΩòÌÖêÏ∏† -->
                            <div class="snippet-image-wrapper" id="imageContentWrapper" style="display: none;">
                                <div class="snippet-image-container">
                                    <img id="snippetImage" class="snippet-image" alt="Snippet Image"/>
                                    <button class="copy-btn image-copy-btn" id="copyImageBtn" title="Ïù¥ÎØ∏ÏßÄ URL Î≥µÏÇ¨">
                                        <i class="fas fa-link"></i>
                                    </button>
                                </div>
                                <div class="snippet-alt-text" id="snippetAltText" style="display: none;">
                                    <strong>ÏÑ§Î™Ö:</strong> <span id="altTextContent"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
	<meta charset="UTF-8">
	<title>IP 차단 로그</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
	<link rel="stylesheet" href="/user/css/admin/ip-blocks.css">
</head>
<body>
<div class="status-indicator online" id="statusIndicator">
	<div class="pulse"></div>
	실시간 모니터링 중
</div>

<div class="container">
	<div class="header">
		<h1><i class="fas fa-shield-alt"></i> IP 차단 로그</h1>
		<p class="header-subtitle">실시간 보안 모니터링 대시보드</p>
	</div>

	<div class="stats-grid" id="statsGrid">
		<div class="stat-card">
			<div class="stat-icon danger">
				<i class="fas fa-ban"></i>
			</div>
			<div class="stat-value" id="totalBlocked">0</div>
			<div class="stat-label">총 차단된 IP</div>
		</div>
		<div class="stat-card">
			<div class="stat-icon warning">
				<i class="fas fa-robot"></i>
			</div>
			<div class="stat-value" id="botCount">0</div>
			<div class="stat-label">Bot 차단</div>
		</div>
		<div class="stat-card">
			<div class="stat-icon success">
				<i class="fas fa-globe"></i>
			</div>
			<div class="stat-value" id="countryCount">0</div>
			<div class="stat-label">차단 국가</div>
		</div>
		<div class="stat-card">
			<div class="stat-icon primary">
				<i class="fas fa-clock"></i>
			</div>
			<div class="stat-value" id="lastUpdate">-</div>
			<div class="stat-label">마지막 업데이트</div>
		</div>
	</div>

	<div class="content-grid">
		<div class="table-section">
			<div class="section-header">
				<h2 class="section-title">
					<i class="fas fa-list"></i>
					차단된 IP 목록
				</h2>
			</div>
			<div class="table-container">
				<table>
					<thead>
					<tr>
						<th>IP 주소</th>
						<th>국가</th>
						<th>도시</th>
						<th>유저 에이전트</th>
						<th>타입</th>
						<th>차단 시간</th>
					</tr>
					</thead>
					<tbody id="logTableBody">
					<tr>
						<td colspan="6" class="loading">
							<div class="spinner"></div>
							데이터를 불러오는 중...
						</td>
					</tr>
					</tbody>
				</table>
			</div>
		</div>

		<div class="charts-section">
			<div class="chart-card">
				<h3 class="chart-title">
					<i class="fas fa-chart-bar"></i>
					국가별 차단 분포
				</h3>
				<div class="chart-container">
					<canvas id="countryChart"></canvas>
				</div>
			</div>

			<div class="chart-card">
				<h3 class="chart-title">
					<i class="fas fa-chart-pie"></i>
					Bot vs Browser
				</h3>
				<div class="chart-container">
					<canvas id="typeChart"></canvas>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="/user/js/admin/ip-blocks.js"></script>
</body>
</html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
   <meta charset="UTF-8">
   <title>Snippets List</title>
   <style>
     .pagination { display: flex; list-style: none; padding: 0; margin: 1rem 0; }
     .pagination li { margin: 0 0.3rem; }
     .pagination li.disabled a { pointer-events: none; color: gray; }
     .pagination li.active a { font-weight: bold; }
   </style>
</head>

<body>
   <h1>Snippets List</h1>

   <table border="1">
      <thead>
         <tr>
            <th>Snippet ID</th>
            <th>User ID</th>
           
            <th>Color ID</th>
            <th>Source URL</th>
            <th>Type</th>
            <th>Memo</th>
            <th>Created At</th>
            <th>Updated At</th>
            <th>Like Count</th>
            <th>Visibility</th>
            <th>Actions</th>
         </tr>
      </thead>
      <tbody>
         <tr th:each="snippet : ${snippets}">
            <td th:text="${snippet.snippetId}"></td>
            <td th:text="${snippet.userId}"></td>
            <td th:text="${snippet.colorId}"></td>
            <td th:text="${snippet.sourceUrl}"></td>
            <td th:text="${snippet.type}"></td>
            <td th:text="${snippet.memo}"></td>
            <td th:text="${#dates.format(snippet.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
            <td th:text="${#dates.format(snippet.updatedAt, 'yyyy-MM-dd HH:mm')}"></td>
            <td th:text="${snippet.likeCount}"></td>
            <td th:text="${snippet.visibility}"></td>
            <td>
               <a th:href="@{/snippets/{id}(id=${snippet.snippetId})}">상세 보기</a>
            </td>
         </tr>
      </tbody>
   </table>
   
   <!-- 페이징 내비게이션 -->
   <nav>
     <ul class="pagination">
       <li th:classappend="${startPage > pageGroupSize} ? '' : 'disabled'">
         <a th:href="@{/snippets(page=${startPage - pageGroupSize})}">이전</a>
       </li>
       <li th:each="i : ${#numbers.sequence(startPage, endPage)}"
           th:classappend="${i == pageInfo.pageNum} ? 'active' : ''">
         <a th:href="@{/snippets(page=${i})}" th:text="${i}">1</a>
       </li>
       <li th:classappend="${endPage < pageInfo.pages} ? '' : 'disabled'">
         <a th:href="@{/snippets(page=${endPage + 1})}">다음</a>
       </li>
     </ul>
   </nav>
   
   <a href="/snippets/new">
      <button>스니펫 추가</button>
   </a>
   
   <a href="/">Go to Home</a>
</body>

</html>
